{"version":3,"file":"index.mjs","sources":["../src/utils/uuid.ts","../src/core/services/report.ts","../src/core/errors/js-errors.ts","../src/core/errors/promise-errors.ts","../src/core/errors/ajax-errors.ts","../src/core/errors/resource-errors.ts","../src/core/errors/vue-errors.ts","../src/core/errors/index.ts","../src/core/performance/index.ts","../src/core/trace/xhr-interceptor.ts","../src/core/trace/fetch-interceptor.ts","../src/core/trace/index.ts","../src/core/monitor.ts","../src/core/legacy.ts","../src/index.ts"],"sourcesContent":["const UUID_RADIX = 16;\nconst UUID_MASK_3 = 0x3;\nconst UUID_MASK_8 = 0x8;\n\nexport function generateUUID(): string {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c: string): string => {\n    const r = (Math.random() * UUID_RADIX) | 0;\n    const v = c === 'x' ? r : (r & UUID_MASK_3) | UUID_MASK_8;\n    return v.toString(UUID_RADIX);\n  });\n}\n","import { ErrorInfo, PerformanceData, SegmentFields } from '../types';\n\nconst ERROR_STATUS_CODE = 400;\nexport class ReportService {\n  private buildURL(type: string, collector: string): string {\n    const paths: Record<string, string> = {\n      ERROR: '/error',\n      ERRORS: '/errors',\n      PERF: '/perf',\n      SEGMENT: '/segment',\n      SEGMENTS: '/segments',\n    };\n    return `${collector}${paths[type] || ''}`;\n  }\n\n  sendError(error: ErrorInfo): void {\n    const url = this.buildURL('ERROR', error.collector);\n    this.sendByFetch(url, error);\n  }\n\n  sendPerformance(perf: PerformanceData): void {\n    const url = this.buildURL('PERF', perf.collector);\n    this.sendByFetch(url, perf);\n  }\n\n  sendSegments(segments: SegmentFields[]): void {\n    const url = this.buildURL('SEGMENTS', segments[0]?.service || '');\n    this.sendByFetch(url, segments);\n  }\n\n  sendSegmentsByBeacon(segments: SegmentFields[]): void {\n    const url = this.buildURL('SEGMENTS', segments[0]?.service || '');\n    this.sendByBeacon(url, segments);\n  }\n\n  private sendByFetch(url: string, data: unknown): void {\n    if (!url) return;\n\n    fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    })\n      .then((response) => {\n        if (response.status >= ERROR_STATUS_CODE) {\n          throw new Error(`Request failed with status ${response.status}`);\n        }\n      })\n      .catch((error) => {\n        console.warn('Report error:', error);\n      });\n  }\n\n  private sendByBeacon(url: string, data: unknown): void {\n    if (!url) return;\n\n    if (typeof navigator.sendBeacon === 'function') {\n      navigator.sendBeacon(url, new Blob([JSON.stringify(data)], { type: 'application/json' }));\n    } else {\n      this.sendByFetch(url, data);\n    }\n  }\n}\n","import { ErrorTrackingOptions, ErrorInfo } from '../types';\nimport { generateUUID } from '../../utils/uuid';\nimport { ReportService } from '../services/report';\n\nexport class JSErrors {\n  private options: ErrorTrackingOptions;\n  private reportService: ReportService;\n  private enabled: boolean = false;\n\n  constructor(options: ErrorTrackingOptions) {\n    this.options = options;\n    this.reportService = new ReportService();\n  }\n\n  enable(): void {\n    if (this.enabled) return;\n\n    window.addEventListener('error', this.handleError.bind(this));\n    this.enabled = true;\n  }\n\n  disable(): void {\n    window.removeEventListener('error', this.handleError.bind(this));\n    this.enabled = false;\n  }\n\n  private handleError(event: ErrorEvent): void {\n    const errorInfo: ErrorInfo = {\n      uniqueId: generateUUID(),\n      service: this.options.service,\n      serviceVersion: this.options.serviceVersion,\n      pagePath: this.options.pagePath,\n      category: 'JS_ERROR',\n      grade: 'ERROR',\n      errorUrl: event.filename || window.location.href,\n      message: event.message,\n      collector: this.options.collector,\n      stack: event.error?.stack,\n    };\n\n    this.reportService.sendError(errorInfo);\n  }\n\n  capture(error: Error, context?: Partial<ErrorInfo>): void {\n    const errorInfo: ErrorInfo = {\n      uniqueId: generateUUID(),\n      service: this.options.service,\n      serviceVersion: this.options.serviceVersion,\n      pagePath: this.options.pagePath,\n      category: 'JS_ERROR',\n      grade: 'ERROR',\n      errorUrl: window.location.href,\n      message: error.message,\n      collector: this.options.collector,\n      stack: error.stack,\n      ...context,\n    };\n\n    this.reportService.sendError(errorInfo);\n  }\n\n  updateConfig(options: ErrorTrackingOptions): void {\n    this.options = { ...this.options, ...options };\n  }\n}\n","import { ErrorTrackingOptions, ErrorInfo } from '../types';\nimport { generateUUID } from '../../utils/uuid';\nimport { ReportService } from '../services/report';\n\nexport class PromiseErrors {\n  private options: ErrorTrackingOptions;\n  private reportService: ReportService;\n  private enabled: boolean = false;\n\n  constructor(options: ErrorTrackingOptions) {\n    this.options = options;\n    this.reportService = new ReportService();\n  }\n\n  enable(): void {\n    if (this.enabled) return;\n\n    window.addEventListener('unhandledrejection', this.handleRejection.bind(this));\n    this.enabled = true;\n  }\n\n  disable(): void {\n    window.removeEventListener('unhandledrejection', this.handleRejection.bind(this));\n    this.enabled = false;\n  }\n\n  private handleRejection(event: PromiseRejectionEvent): void {\n    const errorInfo: ErrorInfo = {\n      uniqueId: generateUUID(),\n      service: this.options.service,\n      serviceVersion: this.options.serviceVersion,\n      pagePath: this.options.pagePath,\n      category: 'PROMISE_ERROR',\n      grade: 'ERROR',\n      errorUrl: window.location.href,\n      message: event.reason?.message || 'Unhandled Promise Rejection',\n      collector: this.options.collector,\n      stack: event.reason?.stack,\n    };\n\n    this.reportService.sendError(errorInfo);\n  }\n\n  updateConfig(options: ErrorTrackingOptions): void {\n    this.options = { ...this.options, ...options };\n  }\n}\n","import { ErrorTrackingOptions, ErrorInfo } from '../types';\nimport { generateUUID } from '../../utils/uuid';\nimport { ReportService } from '../services/report';\n\ninterface ExtendedXMLHttpRequest extends XMLHttpRequest {\n  _apmMethod?: string;\n  _apmUrl?: string;\n  _apmStartTime?: number;\n}\n\nexport class AjaxErrors {\n  private options: ErrorTrackingOptions;\n  private reportService: ReportService;\n  private enabled: boolean = false;\n  private originalXHROpen: typeof XMLHttpRequest.prototype.open | null = null;\n  private originalXHRSend: typeof XMLHttpRequest.prototype.send | null = null;\n\n  constructor(options: ErrorTrackingOptions) {\n    this.options = options;\n    this.reportService = new ReportService();\n  }\n\n  enable(): void {\n    if (this.enabled) return;\n\n    this.interceptXHR();\n    this.enabled = true;\n  }\n\n  disable(): void {\n    if (!this.enabled) return;\n\n    this.restoreXHR();\n    this.enabled = false;\n  }\n\n  private interceptXHR(): void {\n    const self = this;\n\n    this.originalXHROpen = XMLHttpRequest.prototype.open;\n    this.originalXHRSend = XMLHttpRequest.prototype.send;\n\n    XMLHttpRequest.prototype.open = function(\n      method: string,\n      url: string | URL,\n      async?: boolean,\n      username?: string | null,\n      password?: string | null\n    ) {\n      const xhr = this as ExtendedXMLHttpRequest;\n      xhr._apmMethod = method;\n      xhr._apmUrl = url.toString();\n      xhr._apmStartTime = Date.now();\n      return self.originalXHROpen!.call(this, method, url, async ?? false, username, password);\n    };\n\n    XMLHttpRequest.prototype.send = function(body?: XMLHttpRequestBodyInit | Document | null) {\n      const xhr = this as ExtendedXMLHttpRequest;\n\n      xhr.addEventListener('error', function() {\n        const errorInfo: ErrorInfo = {\n          uniqueId: generateUUID(),\n          service: self.options.service,\n          serviceVersion: self.options.serviceVersion,\n          pagePath: self.options.pagePath,\n          category: 'AJAX_ERROR',\n          grade: 'ERROR',\n          errorUrl: xhr._apmUrl || window.location.href,\n          message: `AJAX request failed: ${xhr._apmMethod} ${xhr._apmUrl}`,\n          collector: self.options.collector,\n          stack: undefined,\n        };\n\n        self.reportService.sendError(errorInfo);\n      });\n\n      xhr.addEventListener('timeout', function() {\n        const errorInfo: ErrorInfo = {\n          uniqueId: generateUUID(),\n          service: self.options.service,\n          serviceVersion: self.options.serviceVersion,\n          pagePath: self.options.pagePath,\n          category: 'AJAX_ERROR',\n          grade: 'ERROR',\n          errorUrl: xhr._apmUrl || window.location.href,\n          message: `AJAX request timeout: ${xhr._apmMethod} ${xhr._apmUrl}`,\n          collector: self.options.collector,\n          stack: undefined,\n        };\n\n        self.reportService.sendError(errorInfo);\n      });\n\n      return self.originalXHRSend!.call(this, body);\n    };\n  }\n\n  private restoreXHR(): void {\n    if (this.originalXHROpen) {\n      XMLHttpRequest.prototype.open = this.originalXHROpen;\n    }\n    if (this.originalXHRSend) {\n      XMLHttpRequest.prototype.send = this.originalXHRSend;\n    }\n  }\n\n  updateConfig(options: ErrorTrackingOptions): void {\n    this.options = { ...this.options, ...options };\n  }\n}\n","import { ErrorTrackingOptions, ErrorInfo } from '../types';\nimport { generateUUID } from '../../utils/uuid';\nimport { ReportService } from '../services/report';\n\nexport class ResourceErrors {\n  private options: ErrorTrackingOptions;\n  private reportService: ReportService;\n  private enabled: boolean = false;\n\n  constructor(options: ErrorTrackingOptions) {\n    this.options = options;\n    this.reportService = new ReportService();\n  }\n\n  enable(): void {\n    if (this.enabled) return;\n\n    window.addEventListener('error', this.handleError.bind(this), true);\n    this.enabled = true;\n  }\n\n  disable(): void {\n    window.removeEventListener('error', this.handleError.bind(this), true);\n    this.enabled = false;\n  }\n\n  private handleError(event: Event): void {\n    const target = event.target as HTMLElement;\n\n    if (target instanceof HTMLScriptElement) {\n      const errorInfo: ErrorInfo = {\n        uniqueId: generateUUID(),\n        service: this.options.service,\n        serviceVersion: this.options.serviceVersion,\n        pagePath: this.options.pagePath,\n        category: 'RESOURCE_ERROR',\n        grade: 'ERROR',\n        errorUrl: target.src || window.location.href,\n        message: `Resource load error: ${target.tagName}`,\n        collector: this.options.collector,\n      };\n\n      this.reportService.sendError(errorInfo);\n    } else if (target instanceof HTMLLinkElement) {\n      const errorInfo: ErrorInfo = {\n        uniqueId: generateUUID(),\n        service: this.options.service,\n        serviceVersion: this.options.serviceVersion,\n        pagePath: this.options.pagePath,\n        category: 'RESOURCE_ERROR',\n        grade: 'ERROR',\n        errorUrl: target.href || window.location.href,\n        message: `Resource load error: ${target.tagName}`,\n        collector: this.options.collector,\n      };\n\n      this.reportService.sendError(errorInfo);\n    } else if (target instanceof HTMLImageElement) {\n      const errorInfo: ErrorInfo = {\n        uniqueId: generateUUID(),\n        service: this.options.service,\n        serviceVersion: this.options.serviceVersion,\n        pagePath: this.options.pagePath,\n        category: 'RESOURCE_ERROR',\n        grade: 'ERROR',\n        errorUrl: target.src || window.location.href,\n        message: `Resource load error: ${target.tagName}`,\n        collector: this.options.collector,\n      };\n\n      this.reportService.sendError(errorInfo);\n    }\n  }\n\n  updateConfig(options: ErrorTrackingOptions): void {\n    this.options = { ...this.options, ...options };\n  }\n}\n","import { ErrorTrackingOptions, ErrorInfo, VueInstance } from '../types';\nimport { generateUUID } from '../../utils/uuid';\nimport { ReportService } from '../services/report';\n\nexport class VueErrors {\n  private options: ErrorTrackingOptions;\n  private reportService: ReportService;\n  private enabled: boolean = false;\n\n  constructor(options: ErrorTrackingOptions) {\n    this.options = options;\n    this.reportService = new ReportService();\n  }\n\n  enable(vue: VueInstance): void {\n    if (this.enabled) return;\n\n    if (vue && vue.config) {\n      vue.config.errorHandler = (error: Error, _vm: unknown, info: string) => {\n        const errorInfo: ErrorInfo = {\n          uniqueId: generateUUID(),\n          service: this.options.service,\n          serviceVersion: this.options.serviceVersion,\n          pagePath: this.options.pagePath,\n          category: 'VUE_ERROR',\n          grade: 'ERROR',\n          errorUrl: window.location.href,\n          message: info,\n          collector: this.options.collector,\n          stack: error.stack,\n        };\n\n        this.reportService.sendError(errorInfo);\n      };\n    }\n\n    this.enabled = true;\n  }\n\n  updateConfig(options: ErrorTrackingOptions): void {\n    this.options = { ...this.options, ...options };\n  }\n}\n","import { ErrorTrackingOptions, ErrorInfo } from '../types';\nimport { JSErrors } from './js-errors';\nimport { PromiseErrors } from './promise-errors';\nimport { AjaxErrors } from './ajax-errors';\nimport { ResourceErrors } from './resource-errors';\nimport { VueErrors } from './vue-errors';\n\nexport class ErrorTracker {\n  private options: ErrorTrackingOptions;\n  private jsErrors: JSErrors;\n  private promiseErrors: PromiseErrors;\n  private ajaxErrors: AjaxErrors;\n  private resourceErrors: ResourceErrors;\n  private vueErrors: VueErrors;\n\n  constructor(options: ErrorTrackingOptions) {\n    this.options = options;\n    this.jsErrors = new JSErrors(options);\n    this.promiseErrors = new PromiseErrors(options);\n    this.ajaxErrors = new AjaxErrors(options);\n    this.resourceErrors = new ResourceErrors(options);\n    this.vueErrors = new VueErrors(options);\n  }\n\n  enable(options: ErrorTrackingOptions): void {\n    this.options = { ...this.options, ...options };\n\n    if (options.jsErrors ?? false) {\n      this.jsErrors.enable();\n      this.promiseErrors.enable();\n      if (options.vue) {\n        this.vueErrors.enable(options.vue);\n      }\n    }\n\n    if (options.apiErrors ?? false) {\n      this.ajaxErrors.enable();\n    }\n\n    if (options.resourceErrors ?? false) {\n      this.resourceErrors.enable();\n    }\n  }\n\n  capture(error: Error, context?: Partial<ErrorInfo>): void {\n    this.jsErrors.capture(error, context);\n  }\n\n  updateConfig(options: ErrorTrackingOptions): void {\n    this.options = { ...this.options, ...options };\n    this.jsErrors.updateConfig(options);\n    this.promiseErrors.updateConfig(options);\n    this.ajaxErrors.updateConfig(options);\n    this.resourceErrors.updateConfig(options);\n    this.vueErrors.updateConfig(options);\n  }\n}\n","import { PerformanceTrackingOptions, PerformanceData } from '../types';\nimport { generateUUID } from '../../utils/uuid';\nimport { ReportService } from '../services/report';\n\nexport class PerformanceTracker {\n  private options: PerformanceTrackingOptions;\n  private reportService: ReportService;\n\n  constructor(options: PerformanceTrackingOptions) {\n    this.options = options;\n    this.reportService = new ReportService();\n  }\n\n  track(): void {\n    if (document.readyState === 'complete') {\n      this.collectAndReport();\n    } else {\n      window.addEventListener('load', () => this.collectAndReport(), { once: true });\n    }\n  }\n\n  private collectAndReport(): void {\n    if (!(this.options.autoTracePerf ?? false)) return;\n\n    const performanceData: PerformanceData = {\n      uniqueId: generateUUID(),\n      service: this.options.service,\n      serviceVersion: this.options.serviceVersion,\n      pagePath: this.options.pagePath,\n      collector: this.options.collector,\n      timing: performance.timing,\n    };\n\n    if (this.options.useFmp ?? false) {\n      performanceData.fmpTime = this.calculateFMP();\n    }\n\n    this.reportService.sendPerformance(performanceData);\n  }\n\n  private calculateFMP(): number {\n    return 0;\n  }\n\n  updateConfig(options: PerformanceTrackingOptions): void {\n    this.options = { ...this.options, ...options };\n  }\n}\n","import { TraceTrackingOptions } from '../types';\n\nexport class XHRInterceptor {\n  constructor() {}\n\n  enable(): void {\n    // TODO: Implement XHR interception logic\n  }\n\n  disable(): void {\n    // TODO: Implement XHR cleanup logic\n  }\n\n  updateConfig(_options: TraceTrackingOptions): void {\n    // TODO: Implement config update logic\n  }\n}\n","import { TraceTrackingOptions } from '../types';\n\nexport class FetchInterceptor {\n  constructor() {}\n\n  enable(): void {\n    // TODO: Implement Fetch interception logic\n  }\n\n  disable(): void {\n    // TODO: Implement Fetch cleanup logic\n  }\n\n  updateConfig(_options: TraceTrackingOptions): void {\n    // TODO: Implement config update logic\n  }\n}\n","import { TraceTrackingOptions, SegmentFields, TagOption } from '../types';\nimport { XHRInterceptor } from './xhr-interceptor';\nimport { FetchInterceptor } from './fetch-interceptor';\nimport { ReportService } from '../services/report';\n\nexport class TraceTracker {\n  private options: TraceTrackingOptions;\n  private segments: SegmentFields[] = [];\n  private xhrInterceptor: XHRInterceptor;\n  private fetchInterceptor: FetchInterceptor;\n  private reportService: ReportService;\n  private timer: number | null = null;\n\n  constructor(options: TraceTrackingOptions) {\n    this.options = options;\n    this.reportService = new ReportService();\n    this.xhrInterceptor = new XHRInterceptor();\n    this.fetchInterceptor = new FetchInterceptor();\n  }\n\n  enable(options: TraceTrackingOptions): void {\n    this.options = { ...this.options, ...options };\n    this.xhrInterceptor.enable();\n    this.fetchInterceptor.enable();\n    this.setupReportTimer();\n    this.setupUnloadHandler();\n  }\n\n  disable(): void {\n    this.xhrInterceptor.disable();\n    this.fetchInterceptor.disable();\n    this.clearReportTimer();\n  }\n\n  private setupReportTimer(): void {\n    if (this.timer != null) clearInterval(this.timer);\n\n    this.timer = window.setInterval(() => {\n      if (this.segments.length > 0) {\n        this.reportService.sendSegments([...this.segments]);\n        this.segments.splice(0, this.segments.length);\n      }\n    }, this.options.traceTimeInterval ?? 60000);\n  }\n\n  private clearReportTimer(): void {\n    if (this.timer != null) {\n      clearInterval(this.timer);\n      this.timer = null;\n    }\n  }\n\n  private setupUnloadHandler(): void {\n    window.addEventListener('beforeunload', () => {\n      if (this.segments.length > 0) {\n        this.reportService.sendSegmentsByBeacon([...this.segments]);\n      }\n    });\n  }\n\n  setCustomTags(tags: TagOption[]): void {\n    this.options.customTags = tags;\n    this.xhrInterceptor.updateConfig(this.options);\n    this.fetchInterceptor.updateConfig(this.options);\n  }\n\n  updateConfig(options: TraceTrackingOptions): void {\n    this.options = { ...this.options, ...options };\n    this.xhrInterceptor.updateConfig(this.options);\n    this.fetchInterceptor.updateConfig(this.options);\n  }\n}\n","import {\n  APMOptions,\n  ErrorTrackingOptions,\n  PerformanceTrackingOptions,\n  TraceTrackingOptions,\n  TagOption,\n  ErrorInfo,\n} from './types';\nimport { ErrorTracker } from './errors';\nimport { PerformanceTracker } from './performance';\nimport { TraceTracker } from './trace';\n\nexport type { APMOptions, TagOption };\n\nexport class APMClient {\n  private options: APMOptions;\n  private errorTracker: ErrorTracker;\n  private performanceTracker: PerformanceTracker;\n  private traceTracker: TraceTracker;\n\n  constructor(options?: Partial<APMOptions>) {\n    this.options = {\n      collector: typeof window !== 'undefined' ? window.location.origin : '',\n      service: '',\n      serviceVersion: '',\n      pagePath: typeof window !== 'undefined' ? window.location.pathname : '',\n      ...options,\n    };\n\n    this.errorTracker = new ErrorTracker(this.options);\n    this.performanceTracker = new PerformanceTracker(this.options);\n    this.traceTracker = new TraceTracker(this.options);\n  }\n\n  init(\n    options: APMOptions & ErrorTrackingOptions & PerformanceTrackingOptions & TraceTrackingOptions\n  ): void {\n    this.options = { ...this.options, ...options };\n    this.validateOptions();\n\n    if (\n      (options.jsErrors ?? false) ||\n      (options.apiErrors ?? false) ||\n      (options.resourceErrors ?? false)\n    ) {\n      this.errorTracker.enable(options);\n    }\n\n    if ((options.autoTracePerf ?? false) && !(options.enableSPA ?? false)) {\n      this.performanceTracker.track();\n    }\n\n    this.traceTracker.enable(options);\n  }\n\n  updateConfig(options: Partial<APMOptions>): void {\n    this.options = { ...this.options, ...options };\n    this.errorTracker.updateConfig(this.options);\n    this.performanceTracker.updateConfig(this.options);\n    this.traceTracker.updateConfig(this.options);\n  }\n\n  captureError(error: Error, context?: Partial<ErrorInfo>): void {\n    this.errorTracker.capture(error, context);\n  }\n\n  trackPerformance(options?: Partial<PerformanceTrackingOptions>): void {\n    if (options) {\n      this.updateConfig(options);\n    }\n    this.performanceTracker.track();\n  }\n\n  setCustomTags(tags: TagOption[]): void {\n    if (this.validateTags(tags)) {\n      this.traceTracker.setCustomTags(tags);\n    }\n  }\n\n  private validateOptions(): void {\n    const { collector, service, pagePath, serviceVersion } = this.options;\n\n    if (typeof collector !== 'string') {\n      this.options.collector = typeof window !== 'undefined' ? window.location.origin : '';\n    }\n    if (typeof service !== 'string') {\n      this.options.service = '';\n    }\n    if (typeof pagePath !== 'string') {\n      this.options.pagePath = typeof window !== 'undefined' ? window.location.pathname : '';\n    }\n    if (typeof serviceVersion !== 'string') {\n      this.options.serviceVersion = '';\n    }\n  }\n\n  private validateTags(tags?: TagOption[]): boolean {\n    if (!tags) {\n      return false;\n    }\n    if (!Array.isArray(tags)) {\n      console.warn('customTags must be an array');\n      return false;\n    }\n    const isValid = tags.every(\n      (tag) => tag && typeof tag.key === 'string' && typeof tag.value === 'string'\n    );\n    if (!isValid) {\n      console.warn('customTags format error');\n    }\n    return isValid;\n  }\n\n  getOptions(): Readonly<APMOptions> {\n    return this.options;\n  }\n}\n","import { APMClient } from './monitor';\nimport {\n  APMOptions,\n  ErrorTrackingOptions,\n  PerformanceTrackingOptions,\n  TraceTrackingOptions,\n  TagOption,\n  VueInstance,\n} from './types';\n\nexport interface LegacyOptions\n  extends APMOptions, ErrorTrackingOptions, PerformanceTrackingOptions, TraceTrackingOptions {\n  vue?: VueInstance;\n}\n\nexport function createLegacyClient() {\n  const client = new APMClient();\n\n  const legacyClient = {\n    customOptions: {} as LegacyOptions,\n\n    register(configs: LegacyOptions): void {\n      this.customOptions = { ...this.customOptions, ...configs };\n      client.init(configs);\n    },\n\n    setPerformance(configs: PerformanceTrackingOptions): void {\n      this.customOptions = { ...this.customOptions, ...configs, useFmp: false };\n      client.updateConfig(this.customOptions);\n      client.trackPerformance(this.customOptions);\n    },\n\n    catchErrors(options: ErrorTrackingOptions): void {\n      const { service, pagePath, serviceVersion, collector } = options;\n      const errorOptions: ErrorTrackingOptions = {\n        ...options,\n        service: service || this.customOptions.service,\n        pagePath: pagePath || this.customOptions.pagePath,\n        serviceVersion: serviceVersion || this.customOptions.serviceVersion,\n        collector: collector || this.customOptions.collector,\n      };\n      client.init(errorOptions);\n    },\n\n    reportFrameErrors(configs: APMOptions, error: Error): void {\n      client.captureError(error, {\n        service: configs.service,\n        pagePath: configs.pagePath,\n        serviceVersion: configs.serviceVersion,\n        collector: configs.collector,\n      });\n    },\n\n    setCustomTags(tags: TagOption[]): void {\n      if (this.validateTags(tags)) {\n        this.customOptions.customTags = tags;\n        client.setCustomTags(tags);\n      }\n    },\n\n    validateTags(customTags?: TagOption[]): boolean {\n      if (!customTags) {\n        return false;\n      }\n      if (!Array.isArray(customTags)) {\n        this.customOptions.customTags = undefined;\n        console.warn('customTags error');\n        return false;\n      }\n      let isValid = true;\n      for (const tag of customTags) {\n        if (!(tag && tag.key && tag.value)) {\n          isValid = false;\n        }\n      }\n      if (!isValid) {\n        this.customOptions.customTags = undefined;\n        console.warn('customTags error');\n      }\n      return isValid;\n    },\n\n    validateOptions(): void {\n      const {\n        collector,\n        service,\n        pagePath,\n        serviceVersion,\n        jsErrors,\n        apiErrors,\n        resourceErrors,\n        autoTracePerf,\n        useFmp,\n        enableSPA,\n        traceSDKInternal,\n        detailMode,\n        noTraceOrigins,\n        traceTimeInterval,\n        vue,\n      } = this.customOptions;\n\n      this.validateTags(this.customOptions.customTags);\n\n      if (typeof collector !== 'string') {\n        this.customOptions.collector = typeof window !== 'undefined' ? window.location.origin : '';\n      }\n      if (typeof service !== 'string') {\n        this.customOptions.service = '';\n      }\n      if (typeof pagePath !== 'string') {\n        this.customOptions.pagePath = typeof window !== 'undefined' ? window.location.pathname : '';\n      }\n      if (typeof serviceVersion !== 'string') {\n        this.customOptions.serviceVersion = '';\n      }\n      if (typeof jsErrors !== 'boolean') {\n        this.customOptions.jsErrors = true;\n      }\n      if (typeof apiErrors !== 'boolean') {\n        this.customOptions.apiErrors = true;\n      }\n      if (typeof resourceErrors !== 'boolean') {\n        this.customOptions.resourceErrors = true;\n      }\n      if (typeof autoTracePerf !== 'boolean') {\n        this.customOptions.autoTracePerf = true;\n      }\n      if (typeof useFmp !== 'boolean') {\n        this.customOptions.useFmp = false;\n      }\n      if (typeof enableSPA !== 'boolean') {\n        this.customOptions.enableSPA = false;\n      }\n      if (typeof traceSDKInternal !== 'boolean') {\n        this.customOptions.traceSDKInternal = false;\n      }\n      if (typeof detailMode !== 'boolean') {\n        this.customOptions.detailMode = true;\n      }\n      if (!Array.isArray(noTraceOrigins)) {\n        this.customOptions.noTraceOrigins = [];\n      }\n      if (typeof traceTimeInterval !== 'number') {\n        this.customOptions.traceTimeInterval = 60000;\n      }\n      if (typeof vue !== 'function') {\n        this.customOptions.vue = undefined;\n      }\n    },\n\n    performance(configs: PerformanceTrackingOptions): void {\n      client.trackPerformance(configs);\n    },\n  };\n\n  return legacyClient;\n}\n","import { createLegacyClient } from './core/legacy';\nimport { APMClient } from './core/monitor';\nimport {\n  APMOptions,\n  ErrorTrackingOptions,\n  PerformanceTrackingOptions,\n  TraceTrackingOptions,\n  TagOption,\n} from './core/types';\n\nconst ClientMonitor = createLegacyClient();\n\nif (typeof window !== 'undefined') {\n  (window as any).ClientMonitor = ClientMonitor;\n}\n\nexport default ClientMonitor;\n\nexport { APMClient };\nexport type {\n  APMOptions,\n  ErrorTrackingOptions,\n  PerformanceTrackingOptions,\n  TraceTrackingOptions,\n  TagOption,\n};\n"],"names":[],"mappings":"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"}